# WXSS 功能测试指南

## 测试环境准备

1. 在 VS Code 中打开此项目
2. 按 `F5` 启动扩展开发主机
3. 在新窗口中打开包含小程序项目的文件夹

---

## 测试项目

### 1. 语法高亮测试

**步骤：**
1. 打开 `test/sample.wxss` 文件
2. 检查以下元素是否正确高亮：
   - [ ] 选择器（.container, .title 等）
   - [ ] 属性名（display, flex-direction 等）
   - [ ] 属性值（flex, column 等）
   - [ ] 颜色值（#f5f5f5, rgba() 等）
   - [ ] 数值和单位（20rpx, 32rpx 等）
   - [ ] 注释（/* */ 样式）
   - [ ] 小程序组件（view, text, image）

**预期结果：** 所有元素都应该有不同的颜色高亮

---

### 2. 代码格式化测试

**测试 A: 快捷键格式化**
1. 打开 `test/sample.wxss`
2. 按 `Shift+Alt+F`
3. 检查代码是否被格式化

**测试 B: 命令面板格式化**
1. 打开 `test/sample.wxss`
2. 按 `Ctrl+Shift+P` (Windows) 或 `Cmd+Shift+P` (Mac)
3. 输入 "格式化文档" 或 "Wxss 格式化"
4. 回车执行

**测试 C: 右键菜单格式化**
1. 打开 `test/sample.wxss`
2. 右键点击编辑器
3. 选择 "格式化文档"

**预期结果：** 代码应该被格式化，缩进统一，空格规范

---

### 3. 保存时自动格式化测试

**步骤：**
1. 打开设置（`Ctrl+,` 或 `Cmd+,`）
2. 搜索 `freedomHelper.wxss-format-save-code`
3. 勾选启用
4. 打开 `test/sample.wxss`
5. 随意修改代码（如删除空格）
6. 保存文件（`Ctrl+S` 或 `Cmd+S`）

**预期结果：** 保存时代码应该自动格式化

---

### 4. 自动闭合测试

**步骤：**
1. 打开 `test/sample.wxss`
2. 在文件末尾输入以下字符，观察是否自动补全：
   - 输入 `{` → 应该自动补全 `}`
   - 输入 `(` → 应该自动补全 `)`
   - 输入 `[` → 应该自动补全 `]`
   - 输入 `"` → 应该自动补全 `"`
   - 输入 `'` → 应该自动补全 `'`
   - 输入 `/*` → 应该自动补全 ` */`

**预期结果：** 所有括号和引号都应该自动闭合

---

### 5. 注释快捷键测试

**步骤：**
1. 打开 `test/sample.wxss`
2. 选中一行或多行代码
3. 按 `Ctrl+/` (Windows) 或 `Cmd+/` (Mac)
4. 再次按相同快捷键

**预期结果：** 
- 第一次按：代码被注释（添加 `/* */`）
- 第二次按：取消注释

---

### 6. 代码折叠测试

**步骤：**
1. 打开 `test/sample.wxss`
2. 将鼠标移到行号左侧
3. 点击折叠图标（向下的箭头）

**预期结果：** CSS 规则块应该可以折叠和展开

---

### 7. 配置测试

**测试 A: 统一配置**
1. 打开设置 JSON（`Ctrl+Shift+P` → "首选项: 打开设置(JSON)"）
2. 添加配置：
```json
{
  "freedomHelper.prettierOptions": {
    "printWidth": 120,
    "tabWidth": 4,
    "singleQuote": true
  }
}
```
3. 格式化 `test/sample.wxss`
4. 检查是否使用了 4 空格缩进和单引号

**测试 B: WXSS 独立配置**
1. 在设置 JSON 中添加：
```json
{
  "freedomHelper.wxssPrettierOptions": {
    "printWidth": 80,
    "tabWidth": 2,
    "singleQuote": false
  }
}
```
2. 格式化 `test/sample.wxss`
3. 检查是否使用了 2 空格缩进和双引号（覆盖统一配置）

**预期结果：** 独立配置应该覆盖统一配置

---

### 8. 调试模式测试

**步骤：**
1. 打开设置，启用 `freedomHelper.debugMode`
2. 打开输出面板（查看 → 输出）
3. 选择 "自由助手" 通道
4. 格式化 WXSS 文件
5. 检查是否有详细日志输出

**预期结果：** 应该看到格式化相关的调试日志

---

## 测试清单

- [ ] 语法高亮正常
- [ ] 快捷键格式化正常
- [ ] 命令面板格式化正常
- [ ] 右键菜单格式化正常
- [ ] 保存时自动格式化正常
- [ ] 自动闭合括号和引号正常
- [ ] 注释快捷键正常
- [ ] 代码折叠正常
- [ ] 统一配置生效
- [ ] 独立配置覆盖统一配置
- [ ] 调试模式日志输出正常

---

## 常见问题

### Q: 格式化没有效果？
A: 检查是否有语法错误，Prettier 无法格式化有语法错误的代码。

### Q: 保存时没有自动格式化？
A: 检查 `freedomHelper.wxss-format-save-code` 配置是否启用。

### Q: 配置不生效？
A: 重新加载窗口（`Ctrl+Shift+P` → "重新加载窗口"）。

### Q: 看不到调试日志？
A: 确保 `freedomHelper.debugMode` 已启用，并在输出面板选择了 "自由助手" 通道。

---

## 报告问题

如果发现任何问题，请记录：
1. 问题描述
2. 重现步骤
3. 预期结果 vs 实际结果
4. VS Code 版本
5. 扩展版本
6. 相关配置

提交到：https://github.com/Kiraalla/freedom-helper/issues
